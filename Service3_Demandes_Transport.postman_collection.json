{
  "info": {
    "name": "Service 3 - Demandes de Transport (Complete)",
    "_postman_id": "service3-demandes-transport-complete",
    "description": "Collection Postman compl√®te pour tester le Service 3 : Demandes de Transport et Cat√©gories de Marchandises\n\n## üîê Authentification JWT\nCe service utilise le m√™me syst√®me JWT que le Service Utilisateurs (Microservice 1).\n- **Secret partag√©**: transport_marchandises_api2025vs2026\n- **Algorithme**: HS256\n- **Obtenir un token**: POST http://172.30.80.11:31019/account/login/\n\n## üìö Documentation API\nCe service dispose de plusieurs fa√ßons d'acc√©der √† la documentation :\n- **/** - Documentation JSON personnalis√©e avec exemples de test\n- **/swagger-ui.html** - Interface Swagger UI interactive (ouvrir dans navigateur)\n- **/v3/api-docs** - Sp√©cification OpenAPI 3.0 standard\n\n## Instructions\n1. Utilisez 'üîê Login (Service Utilisateurs)' pour obtenir un token JWT\n2. Ou utilisez le token de test d√©j√† configur√©\n3. Lancez 'Health Check' pour v√©rifier que le service fonctionne\n4. Testez les cat√©gories (lecture publique, √©criture avec JWT)\n5. Cr√©ez une demande avec 'Cr√©er une Demande'\n\n## Endpoints Principaux - Demandes\n- POST /api/v1/demandes - Cr√©er une demande\n- GET /api/v1/demandes - Lister mes demandes\n- GET /api/v1/demandes/{id} - Voir une demande\n- PUT /api/v1/demandes/{id}/validation - Valider une demande\n- PUT /api/v1/demandes/{id}/association - Associer mission/itin√©raire (pour autres microservices)\n\n## Endpoints Principaux - Cat√©gories\n- GET /api/v1/categories - Lister les cat√©gories (public)\n- POST /api/v1/categories - Cr√©er une cat√©gorie (JWT)\n- PUT /api/v1/categories/{id} - Modifier (JWT)\n- DELETE /api/v1/categories/{id} - Supprimer (JWT)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://172.30.80.11:31029",
      "type": "string"
    },
    {
      "key": "authServiceUrl",
      "value": "http://172.30.80.11:31019",
      "type": "string",
      "description": "URL du Service Utilisateurs (Microservice 1) pour l'authentification"
    },
    {
      "key": "itineraireServiceUrl",
      "value": "http://172.30.80.11:31030",
      "type": "string",
      "description": "URL du Service Itin√©raires (Microservice 4)"
    },
    {
      "key": "jwt_token",
      "value": "eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQ0xJRU5UIiwidXNlcl90eXBlIjoiQ0xJRU5UIiwidXNlcl9pZCI6MSwidXNlcklkIjoxLCJlbWFpbCI6ImNsaWVudF90ZXN0QGVtYWlsLmNvbSIsInN1YiI6ImNsaWVudF90ZXN0QGVtYWlsLmNvbSIsImlhdCI6MTc2NDg2NDU3NCwiZXhwIjoxNzY0OTUwOTc0fQ.CFpCtB--ljTcI4DTGvrqUHtkhwjKxURvuFUsGWeZUJE",
      "type": "string",
      "description": "Token JWT compatible avec Service Utilisateurs (HS256, secret: transport_marchandises_api2025vs2026)"
    },
    {
      "key": "demande_id",
      "value": "1",
      "type": "string",
      "description": "ID de la demande √† utiliser pour les tests"
    },
    {
      "key": "categorie_id",
      "value": "cat-001-meubles",
      "type": "string",
      "description": "ID de la cat√©gorie √† utiliser pour les tests (UUID)"
    }
  ],
  "item": [
    {
      "name": "üîê Authentication (Service Utilisateurs)",
      "item": [
        {
          "name": "Login - Obtenir Token JWT",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.access) {",
                  "        pm.collectionVariables.set('jwt_token', jsonData.access);",
                  "        console.log('Token JWT sauvegard√© avec succ√®s!');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"votre_email@example.com\",\n  \"password\": \"votre_mot_de_passe\"\n}"
            },
            "url": {
              "raw": "{{authServiceUrl}}/account/login/",
              "host": ["{{authServiceUrl}}"],
              "path": ["account", "login", ""]
            },
            "description": "Authentification via le Service Utilisateurs (Microservice 1).\n\nLe token retourn√© ('access') est automatiquement sauvegard√© dans la variable 'jwt_token' pour les requ√™tes suivantes.\n\n**Configuration JWT:**\n- Algorithme: HS256\n- Secret: transport_marchandises_api2025vs2026"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{authServiceUrl}}/account/refresh/",
              "host": ["{{authServiceUrl}}"],
              "path": ["account", "refresh", ""]
            },
            "description": "Rafra√Æchir un token JWT expir√©"
          },
          "response": []
        }
      ],
      "description": "Endpoints d'authentification du Service Utilisateurs (Microservice 1)"
    },
    {
      "name": "üìö API Documentation",
      "item": [
        {
          "name": "Custom JSON Documentation (Root)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            },
            "description": "Acc√®de √† la documentation API personnalis√©e en format JSON avec exemples de test pour PowerShell, cURL et Fetch. **Pas d'authentification requise**"
          },
          "response": []
        },
        {
          "name": "OpenAPI 3.0 Specification",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v3/api-docs",
              "host": ["{{baseUrl}}"],
              "path": ["v3", "api-docs"]
            },
            "description": "R√©cup√®re la sp√©cification OpenAPI 3.0 compl√®te en JSON. Utile pour importer dans des outils comme Postman ou g√©n√©rer des SDKs client. **Pas d'authentification requise**"
          },
          "response": []
        },
        {
          "name": "Swagger UI URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/swagger-ui.html",
              "host": ["{{baseUrl}}"],
              "path": ["swagger-ui.html"]
            },
            "description": "Ouvre l'interface Swagger UI interactive dans votre navigateur. Permet de tester les endpoints directement depuis le navigateur web. **Pas d'authentification requise**\n\nNote: Ouvrez cette URL dans un navigateur pour voir l'interface compl√®te."
          },
          "response": []
        }
      ],
      "description": "Endpoints de documentation API - Tous accessibles sans authentification"
    },
    {
      "name": "üè• Health & Status",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/health",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "health"]
            },
            "description": "V√©rifie que l'application est op√©rationnelle"
          },
          "response": []
        },
        {
          "name": "Liveness Probe",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/health/liveness",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "health", "liveness"]
            },
            "description": "Probe Kubernetes pour v√©rifier si l'application est vivante"
          },
          "response": []
        },
        {
          "name": "Readiness Probe",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/health/readiness",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "health", "readiness"]
            },
            "description": "Probe Kubernetes pour v√©rifier si l'application est pr√™te"
          },
          "response": []
        },
        {
          "name": "Metrics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/metrics",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "metrics"]
            },
            "description": "Liste toutes les m√©triques disponibles"
          },
          "response": []
        },
        {
          "name": "Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/info",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "info"]
            },
            "description": "Informations sur l'application"
          },
          "response": []
        }
      ],
      "description": "Endpoints de sant√© et monitoring (pas besoin de JWT)"
    },
    {
      "name": "üì¶ Demandes CRUD",
      "item": [
        {
          "name": "1. Cr√©er une Demande",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "    console.log('Demande cr√©√©e avec ID: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 15.5,\n  \"poids\": 250.0,\n  \"natureMarchandise\": \"Meubles de salon\",\n  \"dateDepart\": \"2025-12-15T10:00:00\",\n  \"villeDepart\": \"Casablanca\",\n  \"villeDestination\": \"Rabat\",\n  \"categorieId\": \"cat-001-meubles\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Cr√©e une nouvelle demande de transport avec une cat√©gorie. L'ID de la demande cr√©√©e est automatiquement sauvegard√© dans la variable 'demande_id'. Le categorieId est optionnel et doit correspondre √† une cat√©gorie existante."
          },
          "response": []
        },
        {
          "name": "2. Lister mes Demandes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "R√©cup√®re toutes les demandes du client authentifi√©"
          },
          "response": []
        },
        {
          "name": "3. Voir une Demande par ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes/{{demande_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes", "{{demande_id}}"]
            },
            "description": "R√©cup√®re les d√©tails d'une demande sp√©cifique"
          },
          "response": []
        },
        {
          "name": "4. Valider une Demande (Accepter le devis)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes/{{demande_id}}/validation",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes", "{{demande_id}}", "validation"]
            },
            "description": "Le client valide sa demande et accepte le devis propos√©"
          },
          "response": []
        },
        {
          "name": "5. Associer Mission/Itin√©raire (pour autres MS)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"missionId\": 5,\n  \"itineraireId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"distanceKm\": 90.5,\n  \"dureeEstimeeMin\": 75\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes/{{demande_id}}/association",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes", "{{demande_id}}", "association"]
            },
            "description": "Associe une mission et un itin√©raire √† une demande existante. Cet endpoint est destin√© √† √™tre appel√© par d'autres microservices (ex: Service Missions).\n\n**Champs:**\n- missionId (obligatoire): ID de la mission\n- itineraireId (optionnel): ID de l'itin√©raire (UUID)\n- distanceKm (optionnel): Distance en km\n- dureeEstimeeMin (optionnel): Dur√©e estim√©e en minutes"
          },
          "response": []
        }
      ],
      "description": "Op√©rations CRUD sur les demandes (n√©cessite JWT)"
    },
    {
      "name": "üìù Exemples de Demandes",
      "item": [
        {
          "name": "Demande - Transport de Meubles",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 20.0,\n  \"poids\": 350.0,\n  \"natureMarchandise\": \"Meubles - Canap√©, table basse et armoire\",\n  \"dateDepart\": \"2025-12-20T09:00:00\",\n  \"villeDepart\": \"Casablanca\",\n  \"villeDestination\": \"Rabat\",\n  \"categorieId\": \"cat-001-meubles\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Exemple: Transport de meubles de Casablanca √† Rabat. Utilise la cat√©gorie 'Meubles et Mobilier' (cat-001-meubles) - produits fragiles."
          },
          "response": []
        },
        {
          "name": "Demande - √âlectrom√©nager",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 8.5,\n  \"poids\": 180.0,\n  \"natureMarchandise\": \"√âlectrom√©nager - R√©frig√©rateur et machine √† laver\",\n  \"dateDepart\": \"2025-12-18T14:00:00\",\n  \"villeDepart\": \"Marrakech\",\n  \"villeDestination\": \"Agadir\",\n  \"categorieId\": \"cat-002-electro\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Exemple: Transport d'√©lectrom√©nager de Marrakech √† Agadir. Utilise la cat√©gorie '√âlectrom√©nager' (cat-002-electro) - produits fragiles."
          },
          "response": []
        },
        {
          "name": "Demande - Mat√©riaux de Construction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 35.0,\n  \"poids\": 2500.0,\n  \"natureMarchandise\": \"Mat√©riaux de construction - Briques, ciment et fer\",\n  \"dateDepart\": \"2025-12-22T08:00:00\",\n  \"villeDepart\": \"Casablanca\",\n  \"villeDestination\": \"Rabat\",\n  \"categorieId\": \"cat-004-materi\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Exemple: Transport de mat√©riaux de construction. Utilise la cat√©gorie 'Mat√©riaux de Construction' (cat-004-materi) - haute densit√©."
          },
          "response": []
        },
        {
          "name": "Demande - Produits Alimentaires",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 12.0,\n  \"poids\": 800.0,\n  \"natureMarchandise\": \"Produits alimentaires - Fruits et l√©gumes frais\",\n  \"dateDepart\": \"2025-12-16T06:00:00\",\n  \"villeDepart\": \"Kenitra\",\n  \"villeDestination\": \"Tanger\",\n  \"categorieId\": \"cat-005-alimen\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Exemple: Transport de produits alimentaires de Kenitra √† Tanger. Utilise la cat√©gorie 'Produits Alimentaires' (cat-005-alimen) - n√©cessite temp√©rature contr√¥l√©e (2-8¬∞C)."
          },
          "response": []
        },
        {
          "name": "Demande - √âquipements Informatiques",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 5.0,\n  \"poids\": 120.0,\n  \"natureMarchandise\": \"√âquipements informatiques - Serveurs et ordinateurs\",\n  \"dateDepart\": \"2025-12-17T11:00:00\",\n  \"villeDepart\": \"Casablanca\",\n  \"villeDestination\": \"Ifrane\",\n  \"categorieId\": \"cat-003-electr\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Exemple: Transport d'√©quipements informatiques. Utilise la cat√©gorie '√âlectronique' (cat-003-electr) - produits tr√®s fragiles n√©cessitant manipulation sp√©ciale."
          },
          "response": []
        }
      ],
      "description": "Exemples de diff√©rents types de demandes de transport"
    },
    {
      "name": "üìÇ Cat√©gories - Lecture (Public)",
      "item": [
        {
          "name": "1. Lister toutes les Cat√©gories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories"]
            },
            "description": "R√©cup√®re toutes les cat√©gories de marchandise disponibles. Pas d'authentification requise."
          },
          "response": []
        },
        {
          "name": "2. Voir une Cat√©gorie par ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/{{categorie_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "{{categorie_id}}"]
            },
            "description": "R√©cup√®re les d√©tails d'une cat√©gorie sp√©cifique par son ID"
          },
          "response": []
        },
        {
          "name": "3. Rechercher par Nom",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/nom/Meubles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "nom", "Meubles"]
            },
            "description": "Recherche une cat√©gorie par son nom exact"
          },
          "response": []
        },
        {
          "name": "4. Rechercher par Mot-cl√©",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/search?keyword=Produits",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "search"],
              "query": [
                {
                  "key": "keyword",
                  "value": "Produits"
                }
              ]
            },
            "description": "Recherche les cat√©gories dont le nom contient le mot-cl√©"
          },
          "response": []
        },
        {
          "name": "5. Filtrer par Fragilit√© (Fragiles)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/fragile?fragile=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "fragile"],
              "query": [
                {
                  "key": "fragile",
                  "value": "true"
                }
              ]
            },
            "description": "R√©cup√®re toutes les cat√©gories de marchandises fragiles"
          },
          "response": []
        },
        {
          "name": "6. Filtrer par Fragilit√© (Non Fragiles)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/fragile?fragile=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "fragile"],
              "query": [
                {
                  "key": "fragile",
                  "value": "false"
                }
              ]
            },
            "description": "R√©cup√®re toutes les cat√©gories de marchandises non fragiles"
          },
          "response": []
        },
        {
          "name": "7. Filtrer par Dangerosit√©",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/dangereux?dangereux=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "dangereux"],
              "query": [
                {
                  "key": "dangereux",
                  "value": "true"
                }
              ]
            },
            "description": "R√©cup√®re toutes les cat√©gories de marchandises dangereuses"
          },
          "response": []
        },
        {
          "name": "8. Filtrer par Temp√©rature (Ambiante)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/temperature?temperature=ambiante",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "temperature"],
              "query": [
                {
                  "key": "temperature",
                  "value": "ambiante"
                }
              ]
            },
            "description": "R√©cup√®re les cat√©gories n√©cessitant une temp√©rature ambiante"
          },
          "response": []
        },
        {
          "name": "9. Filtrer par Temp√©rature (R√©frig√©r√©)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/temperature?temperature=refrigere",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "temperature"],
              "query": [
                {
                  "key": "temperature",
                  "value": "refrigere"
                }
              ]
            },
            "description": "R√©cup√®re les cat√©gories n√©cessitant une r√©frig√©ration"
          },
          "response": []
        },
        {
          "name": "10. Filtrer par Temp√©rature (Congel√©)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/temperature?temperature=congele",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "temperature"],
              "query": [
                {
                  "key": "temperature",
                  "value": "congele"
                }
              ]
            },
            "description": "R√©cup√®re les cat√©gories n√©cessitant une cong√©lation"
          },
          "response": []
        }
      ],
      "description": "Endpoints de lecture des cat√©gories (acc√®s public sans authentification)"
    },
    {
      "name": "üìÇ Cat√©gories - Gestion (Auth)",
      "item": [
        {
          "name": "1. Cr√©er une Cat√©gorie",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('categorie_id', jsonData.idCategorie);",
                  "    console.log('Cat√©gorie cr√©√©e avec ID: ' + jsonData.idCategorie);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nom\": \"Produits √âlectroniques\",\n  \"description\": \"Appareils √©lectroniques et high-tech (smartphones, tablettes, etc.)\",\n  \"densiteMoyenne\": 350.0,\n  \"fragile\": true,\n  \"dangereux\": false,\n  \"temperatureRequise\": \"ambiante\",\n  \"restrictions\": \"Prot√©ger de l'humidit√© et des chocs. Manipulation d√©licate requise.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories"]
            },
            "description": "Cr√©e une nouvelle cat√©gorie de marchandise. L'ID est automatiquement sauvegard√©."
          },
          "response": []
        },
        {
          "name": "2. Modifier une Cat√©gorie",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nom\": \"Produits √âlectroniques Premium\",\n  \"description\": \"Appareils √©lectroniques haut de gamme\",\n  \"fragile\": true,\n  \"restrictions\": \"Manipulation tr√®s d√©licate. Emballage d'origine obligatoire.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/{{categorie_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "{{categorie_id}}"]
            },
            "description": "Met √† jour une cat√©gorie existante"
          },
          "response": []
        },
        {
          "name": "3. Supprimer une Cat√©gorie",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/{{categorie_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "{{categorie_id}}"]
            },
            "description": "Supprime d√©finitivement une cat√©gorie"
          },
          "response": []
        }
      ],
      "description": "Endpoints de gestion des cat√©gories (authentification JWT requise)"
    },
    {
      "name": "üìÇ Cat√©gories - Exemples",
      "item": [
        {
          "name": "Cat√©gorie - Produits Pharmaceutiques",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('categorie_id', jsonData.idCategorie);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nom\": \"M√©dicaments Sensibles\",\n  \"description\": \"Produits pharmaceutiques n√©cessitant un contr√¥le strict de temp√©rature\",\n  \"densiteMoyenne\": 280.0,\n  \"fragile\": true,\n  \"dangereux\": false,\n  \"temperatureRequise\": \"refrigere\",\n  \"restrictions\": \"Maintenir entre 2¬∞C et 8¬∞C. Ne pas exposer √† la lumi√®re directe.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories"]
            },
            "description": "Exemple: Cat√©gorie pour produits pharmaceutiques r√©frig√©r√©s"
          },
          "response": []
        },
        {
          "name": "Cat√©gorie - Mati√®res Dangereuses",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('categorie_id', jsonData.idCategorie);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nom\": \"Produits Chimiques Industriels\",\n  \"description\": \"Substances chimiques n√©cessitant un transport ADR\",\n  \"densiteMoyenne\": 1100.0,\n  \"fragile\": false,\n  \"dangereux\": true,\n  \"temperatureRequise\": \"ambiante\",\n  \"restrictions\": \"Transport ADR obligatoire. V√©hicule ventil√© requis. Conducteur certifi√© ADR.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories"]
            },
            "description": "Exemple: Cat√©gorie pour produits chimiques dangereux"
          },
          "response": []
        },
        {
          "name": "Cat√©gorie - Produits Surgel√©s",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('categorie_id', jsonData.idCategorie);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nom\": \"Glaces et Desserts Glac√©s\",\n  \"description\": \"Produits glac√©s n√©cessitant une cha√Æne du froid stricte\",\n  \"densiteMoyenne\": 550.0,\n  \"fragile\": false,\n  \"dangereux\": false,\n  \"temperatureRequise\": \"congele\",\n  \"restrictions\": \"Maintenir √† -18¬∞C minimum. Ne jamais rompre la cha√Æne du froid.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories"]
            },
            "description": "Exemple: Cat√©gorie pour produits congel√©s"
          },
          "response": []
        }
      ],
      "description": "Exemples de cr√©ation de diff√©rentes cat√©gories"
    },
    {
      "name": "üîó Demandes avec Cat√©gories",
      "item": [
        {
          "name": "1. Voir les Cat√©gories Disponibles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories"]
            },
            "description": "Premi√®re √©tape: Lister les cat√©gories pour choisir celle qui correspond √† votre marchandise"
          },
          "response": []
        },
        {
          "name": "2. Demande Meubles (Fragiles)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "    console.log('Demande cr√©√©e: ' + jsonData.id + ' avec cat√©gorie: ' + (jsonData.categorie ? jsonData.categorie.nom : 'aucune'));",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 18.0,\n  \"poids\": 300.0,\n  \"natureMarchandise\": \"Salon complet - Canap√© 3 places + fauteuils\",\n  \"dateDepart\": \"2025-12-20T09:00:00\",\n  \"villeDepart\": \"Casablanca\",\n  \"villeDestination\": \"Rabat\",\n  \"categorieId\": \"cat-001-meubles\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Demande de transport de meubles avec cat√©gorie 'Meubles et Mobilier' (fragile=true). La r√©ponse inclut les d√©tails de la cat√©gorie."
          },
          "response": []
        },
        {
          "name": "3. Demande Produits Frais (Temp Contr√¥l√©e)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "    console.log('Demande cr√©√©e: ' + jsonData.id + ' - Temp requise: ' + (jsonData.categorie ? jsonData.categorie.temperatureRequise : 'N/A'));",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 8.0,\n  \"poids\": 600.0,\n  \"natureMarchandise\": \"Fruits et l√©gumes frais pour restaurant\",\n  \"dateDepart\": \"2025-12-16T05:00:00\",\n  \"villeDepart\": \"Agadir\",\n  \"villeDestination\": \"Marrakech\",\n  \"categorieId\": \"cat-005-alimen\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Demande avec cat√©gorie alimentaire. La cat√©gorie indique temperatureRequise='2-8¬∞C' pour transport r√©frig√©r√©."
          },
          "response": []
        },
        {
          "name": "4. Demande Produits Chimiques (Dangereux)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "    console.log('‚ö†Ô∏è Demande DANGEREUSE cr√©√©e: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 5.0,\n  \"poids\": 400.0,\n  \"natureMarchandise\": \"Solvants industriels pour usine\",\n  \"dateDepart\": \"2025-12-25T08:00:00\",\n  \"villeDepart\": \"Casablanca\",\n  \"villeDestination\": \"Tanger\",\n  \"categorieId\": \"cat-006-chimiq\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Demande de produits chimiques dangereux. La cat√©gorie indique dangereux=true et les restrictions ADR."
          },
          "response": []
        },
        {
          "name": "5. Demande Sans Cat√©gorie (Optionnel)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('demande_id', jsonData.id);",
                  "    console.log('Demande sans cat√©gorie cr√©√©e: ' + jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"volume\": 10.0,\n  \"poids\": 200.0,\n  \"natureMarchandise\": \"Cartons divers non classifi√©s\",\n  \"dateDepart\": \"2025-12-18T14:00:00\",\n  \"villeDepart\": \"F√®s\",\n  \"villeDestination\": \"Mekn√®s\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Le categorieId est optionnel. Cette demande est cr√©√©e sans cat√©gorie associ√©e."
          },
          "response": []
        },
        {
          "name": "6. Voir Demande avec Cat√©gorie",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes/{{demande_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes", "{{demande_id}}"]
            },
            "description": "R√©cup√®re la demande avec tous ses d√©tails, incluant l'objet 'categorie' complet avec nom, fragile, dangereux, temperatureRequise, etc."
          },
          "response": []
        },
        {
          "name": "7. Filtrer Cat√©gories Fragiles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/fragile?fragile=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "fragile"],
              "query": [
                {
                  "key": "fragile",
                  "value": "true"
                }
              ]
            },
            "description": "Liste toutes les cat√©gories de produits fragiles pour guider le choix du client"
          },
          "response": []
        },
        {
          "name": "8. Filtrer Cat√©gories Dangereuses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/categories/filter/dangereux?dangereux=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "categories", "filter", "dangereux"],
              "query": [
                {
                  "key": "dangereux",
                  "value": "true"
                }
              ]
            },
            "description": "Liste les cat√©gories de produits dangereux n√©cessitant transport ADR"
          },
          "response": []
        }
      ],
      "description": "Exemples montrant la liaison entre les demandes et les cat√©gories. Le categorieId permet d'associer une cat√©gorie √† la demande pour d√©finir les contraintes de transport (fragile, dangereux, temp√©rature)."
    },
    {
      "name": "üîí Tests de S√©curit√©",
      "item": [
        {
          "name": "Test - Sans Token (doit √©chouer)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Test sans token JWT - doit retourner 403 Forbidden"
          },
          "response": []
        },
        {
          "name": "Test - Token Invalide (doit √©chouer)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer invalid_token_here",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/demandes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "demandes"]
            },
            "description": "Test avec un token invalide - doit retourner 403 Forbidden"
          },
          "response": []
        }
      ],
      "description": "Tests pour v√©rifier que la s√©curit√© fonctionne correctement"
    }
  ]
}
